# 이벤트 루프 (중요도 4)

## Table of Conetents

1. [자바스크립트 동작 원리](#자바스크립트-동작-원리이벤트-루프)
2. [런타임 개념](#런타임-개념)

## 자바스크립트 동작 원리(이벤트 루프)

<img width = "1000" src = "https://github.com/Esoolgnah/Frontend-Interview-Questions/raw/main/Images/important-4/javascript-eventloop.gif">

## 이벤트 루프

JavaScript의 런타임 모델은 코드의 실행, 이벤트의 수집과 처리, 큐에 대기중인 하위 작업을 처리하는 이벤트 루프에 기반하고 있다.

## 런타임 개념

### 스택

함수의 호출들은 "프레임" 스택을 형성한다.

```
function foo(b) {
  const a = 10;
  return a + b + 11;
}

function bar(x) {
  const y = 3;
  return foo(x * y);
}

const baz = bar(7); // 42를 baz에 할당

```

1. bar 호출할 때, bar의 인수와 지역 변수에 대한 참조를 포함하는 첫 번째 프레임이 생성됨.
2. bar가 foo 호출할 때, foo의 인수와 지역 변수를 포함하는 두 번째 프레임이 생성되어 첫 번째 프레임의 위로 추가.
3. foo 반환되면, 맨 위의 프레임 요소를 스택 밖으로 꺼냄
   - bar 호출 프레임만 남는다.
4. bar 반환되면, 스택이 비어있게 됨.

### 힙

객체는 힙에 할당된다.

### 큐

js 런타임은 메시지 큐를 사용한다.

각 메시지에는 메세지를 처리하기 위한 함수가 연결되어 있다.

```

이벤트 루프의 임의 시점에, 런타임은 대기열에서 가장 오래된 메시지부터 큐에서 꺼내 처리하기 시작한다. 이를 위해 런타임은 꺼낸 메시지를 매개변수로, 메시지에 연결된 함수를 호출한다. 함수를 호출하면 해당 함수가 사용할 새로운 스택 프레임이 생성된다.

함수 처리는 스택이 다시 텅 빌 때까지 계속된다. 그 후, 큐에 메시지가 남아있으면 같은 방법으로 처리를 계속 진행한다.

```
